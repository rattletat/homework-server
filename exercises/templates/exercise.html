{% extends 'base.html' %}
{% load markdown_extras %}

{% block header%}{{ exercise.short_name }}{% endblock %}

{% block A %}
<table class="table table-active table-striped table-sm" id="exercises">
    <tbody>
        <tr id="id_status">
            <td>Status:</td>
            {% if exercise.expired %}
            <td>Diese Programmieraufgabe ist abgelaufen!</td>

            {% elif exercise.released %}
            <td>Zur Abgabe bereit!</td>
            {% else %}
            <td>Diese Programmieraufgabe ist noch nicht zur Abgabe freigegeben!</td>
            {% endif %}
        </tr>
        <tr id="deadline">
            <td>Deadline:</td>
            <td>{{ exercise.deadline }}</td>
        </tr>
            {% if user.is_authenticated and statistics %}
        <tr id="highscore">
            <td>Dein Highscore:</td>
            <td>{{ statistics.success_rate|floatformat }}% ({{ statistics.success_count }} von {{ statistics.test_count }} Tests bestanden)</td>
        </tr>
            {% endif %}
    </tbody>
</table>
<br>
{% if exercise.released and not exercise.expired and user.is_authenticated %}
<form action="{% url "exercises:view_exercise" exercise.number %}" method="POST" enctype="multipart/form-data"
    align="center">
    {% csrf_token %}
    <div class="form-group file">
        <span class="alert alert-secondary" role="alert">
            <label class="control-label">Hier die Datei ausw√§hlen: </label>
            {{ form.file }}
        </span>
    </div>
    <a href="{% url "exercises:view_results" exercise.number %}"><button type="button" style="width:auto" class="form-control btn btn-primary btn-sm">Ergebnisse</button></a>
    <button type="submit" style="width:auto" class="form-control btn btn-dark btn-sm">Abschicken</button>
</form>
<br>
{% endif %}
{% endblock %}

{% block B %}
<span id="id_description">
    {{ exercise.description.path | mdfile2html | safe }}
</span>
{% endblock %}
